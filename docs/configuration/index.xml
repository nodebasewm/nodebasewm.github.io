<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>NodeBaseDevs â€“ Configuration</title><link>/docs/configuration/</link><description>Recent content in Configuration on NodeBaseDevs</description><generator>Hugo -- gohugo.io</generator><atom:link href="/docs/configuration/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Node Architecture Design</title><link>/docs/configuration/architecture/</link><pubDate>Wed, 08 Feb 2023 00:00:00 +0000</pubDate><guid>/docs/configuration/architecture/</guid><description>
&lt;div class="toc">
&lt;h2>Table Of Contents&lt;/h2>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#validator-node-architecture-design">Validator Node Architecture Design&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#common-attacks">Common Attacks&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#single-node-validator-setup">Single Node Validator Setup&lt;/a>&lt;/li>
&lt;li>&lt;a href="#single-layer-sentry-node-setup">Single Layer Sentry Node Setup&lt;/a>&lt;/li>
&lt;li>&lt;a href="#virtual-private-cloud-vpc">&lt;strong>Virtual Private Cloud (VPC)&lt;/strong>&lt;/a>&lt;/li>
&lt;li>&lt;a href="#public-cloud">Public Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/div>
&lt;h1 id="validator-node-architecture-design">Validator Node Architecture Design&lt;/h1>
&lt;p>Tendermint relies on the set of validators to secure the network. The role of the validators is to run a full-node and participate in consensus by broadcasting votes which contain cryptographic signatures signed by their private key. Validators are connected to each other through the &lt;strong>p2p&lt;/strong> connections.&lt;/p>
&lt;p>Validators are &lt;strong>responsible&lt;/strong> for ensuring the that the network can sustain denial of service attacks.&lt;/p>
&lt;h2 id="common-attacks">Common Attacks&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Distributed Denial of Service (DDoS)&lt;/p>
&lt;p>In the WM Chain, a validator node has a fixed IP address and RESRfule API port connected to the internet, which makes it vulnereable. DDoS attacks will halt the vote messages between validators and prevent blocks from being committed. If more than 1/3 of the network suffer from a DDoS attack it can halt the chain.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Compromise of keys&lt;/p>
&lt;p>The most valuable asset of a validator are the keys it uses to sign blocks. An attacker who has control of the validator can get anything they want signed by the keys.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h1 id="single-node-validator-setup">Single Node Validator Setup&lt;/h1>
&lt;p>This approach is deemed unsafe, though you could set firewall white listings to establish links to only trustful peers. If an IP address is discovered it becomes vulnerable, and it is problematic to change.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Pro&lt;/strong>: easy to implement&lt;/li>
&lt;li>&lt;strong>Con&lt;/strong>: not a flexible setup&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>=&amp;gt; This approach should be avoided, since it will still make your validator vulnerable.&lt;/p>
&lt;/blockquote>
&lt;figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
&lt;img class="card-img-top" src="/docs/configuration/architecture/single-node-validator_hu1c7b63cff321f846abdd83cfc6bbf6f4_41905_600x500_fit_catmullrom_3.png" width="600" height="280">
&lt;figcaption class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
&lt;small class="text-muted">&lt;br/>picture&lt;/small>&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;h1 id="single-layer-sentry-node-setup">Single Layer Sentry Node Setup&lt;/h1>
&lt;p>In this setup, the validator node hides behind its two-layer sentry nodes. Only sentry nodes use public internet. The validator nodes do not need a public IP address, so discovery of IP addresses to target with DDos is much harder. Multiple Sentry Nodes can be connected to a a single validator to further mitigate the risk of DDoS Attacks.&lt;/p>
&lt;h1 id="virtual-private-cloud-vpc">&lt;strong>Virtual Private Cloud (VPC)&lt;/strong>&lt;/h1>
&lt;p>If you use a cloud solution, you can setup a Virtual Private Cloud (VPC) to host your relay and validator nodes. VPC networks provide a more secure connection between resources because the inaccessible from the public internet and other VPC networks. Traffic within a VP network doesn&amp;rsquo;t count against bandwidth usage.&lt;/p>
&lt;blockquote>
&lt;p>In this setup, the relay talks to the validator &amp;gt;node through a secure private connection. The &amp;gt;relay node will then also connect through an &amp;gt;&lt;strong>external_address&lt;/strong> with the p2p validator &amp;gt;network.&lt;/p>
&lt;/blockquote>
&lt;figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 610px">
&lt;img class="card-img-top" src="/docs/configuration/architecture/single-layer-sentry-setup_hu705b58fe2a16c6318323457c7558fd9f_53579_600x500_fit_catmullrom_3.png" width="600" height="383">
&lt;figcaption class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
&lt;small class="text-muted">&lt;br/>picture&lt;/small>&lt;/p>
&lt;/figcaption>
&lt;/figure>
&lt;ul>
&lt;li>&lt;strong>Pro&lt;/strong>: Efficient to mitigate DDos attacks&lt;/li>
&lt;li>&lt;strong>Con&lt;/strong>: Attacker can only attack the validator node, if they gain access to the private network.&lt;/li>
&lt;/ul>
&lt;h1 id="public-cloud">Public Cloud&lt;/h1>
&lt;p>In this setup, the relay and validator node are both connected to the internet. But the validator node is hidden behind the relay node. The relay node will prevent &lt;strong>gossipping&lt;/strong> the IP-address of the validator node.&lt;/p>
&lt;blockquote>
&lt;p>This is less secure than using a VPC network, &amp;gt;since the validator node, although unknown to the &amp;gt;rest of the peers, is still connected to the &amp;gt;public internet and could be discovered.&lt;/p>
&lt;/blockquote></description></item><item><title>Docs: Validator Sentry config.toml</title><link>/docs/configuration/config/</link><pubDate>Wed, 08 Feb 2023 00:00:00 +0000</pubDate><guid>/docs/configuration/config/</guid><description>
&lt;div class="toc">
&lt;h2>Table Of Contents&lt;/h2>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#local-configuration-validator-sentry-setup">Local Configuration Validator-Sentry Setup&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#nodeids">NodeIDs&lt;/a>&lt;/li>
&lt;li>&lt;a href="#validator-node-configuration">Validator Node Configuration&lt;/a>&lt;/li>
&lt;li>&lt;a href="#sentry-node-configuration">Sentry Node Configuration&lt;/a>&lt;/li>
&lt;li>&lt;a href="#about-gossipping">About Gossipping&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/div>
&lt;h1 id="local-configuration-validator-sentry-setup">Local Configuration Validator-Sentry Setup&lt;/h1>
&lt;p>The validator will only talk to the Sentry nodes that are provided. While sentry nodes have the ability to talk to the validator node on the private channel and talk to public nodes elsewhere on the internet. When initializing nodes there are six parameters in the config.toml which are important&lt;/p>
&lt;ul>
&lt;li>&lt;strong>pex&lt;/strong>: boolean value. It tursn the peer exchange reactor (gossip protocol) on or off in a node. When &lt;strong>&lt;code>pex=false&lt;/code>&lt;/strong>, only the list of nodes in the &lt;code>persistent_peers&lt;/code> list are available for connection.&lt;/li>
&lt;li>&lt;strong>persistent_peers&lt;/strong>: commma separated list of &lt;a href="#nodeids">&lt;strong>nodeid@ip:port&lt;/strong>&lt;/a> values that define a list of peers that expected to be online at all times and the node is expected to be able to connect to them. If some nodes are not available, they will be skipped and later retried for a while, before completely dropping them. If no nodes are available from the list and &lt;strong>&lt;code>pex=false&lt;/code>&lt;/strong>, then the node will not be able to join the network.&lt;/li>
&lt;li>&lt;strong>private_peer_ids&lt;/strong>: comma-separated list of nodeid values, that should not be gossiped at all times. This setting tells which nodes should not be handed out to others&lt;/li>
&lt;li>&lt;strong>add_book_strict&lt;/strong>: Turn this off if some of the nodes are on a LAN IP. If off, non routable IP address, like addressed on a private network can be added to the address book.&lt;/li>
&lt;li>&lt;strong>unconditional_peer_ids&lt;/strong>: comma seperated list of nodeIDs. These nodes will be connected no matter the limit of inbound and outbound peers. This is useful when address_books of sentry nodes are full.&lt;/li>
&lt;li>&lt;strong>seed_mode&lt;/strong>. This is used to jump start other nodes by providing a list of peers that the node can connect to.&lt;/li>
&lt;/ul>
&lt;h2 id="nodeids">NodeIDs&lt;/h2>
&lt;p>&lt;strong>Important&lt;/strong>: Nodes in &lt;strong>&lt;code>persistent_peers&lt;/code>&lt;/strong> have the format nodeID@ip:port.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>nodeID&lt;/strong>. The ID of your validator. This can be retrieved with the command&lt;/p>
&lt;p>&lt;code>ayad tendermint show-node-id --home /opt/aya&lt;/code>&lt;/p>
&lt;p>or use the nodebase showkeys script
&lt;code>./showkeys.sh&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ip&lt;/strong> The IP-address of your relay node&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>port&lt;/strong>: The p2p port your relay node is listening on. By default it is 26656&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>For the &lt;strong>&lt;code>private_peer_ids&lt;/code>&lt;/strong> and &lt;strong>&lt;code>unconditional_peer_ids&lt;/code>&lt;/strong>, only put the nodeID (without the @ip:port)&lt;/p>
&lt;h2 id="validator-node-configuration">Validator Node Configuration&lt;/h2>
&lt;div class="table-responsive">
&lt;table class="table-striped table-hover">
&lt;thead class="table-dark">
&lt;tr>
&lt;th>Config Option&lt;/th>
&lt;th>Setting&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>seed_mode&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pex&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>persistent_peers&lt;/td>
&lt;td>list of sentry nodes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>private_peer_ids&lt;/td>
&lt;td>none&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unconditional_peer_ids&lt;/td>
&lt;td>optionally sentry node IDs&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>addr_book_strict&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;blockquote>
&lt;p>The validator node should have &lt;code>pex=false&lt;/code> so it does not gossip to the entire network. The &lt;code>persistent_peers&lt;/code> will be your sentry nodes. &lt;code>private_peer_ids&lt;/code> can be left empty, as the validator is not trying to hide who it is communicating with. Setting &lt;code>unconditional_peer_ids&lt;/code> is optional for a validator since they will not have a full address book.
Since the validator is on a private network and it will connect to the sentry nodes also on a private network, &lt;code>addr_book_strict=false&lt;/code> has to be set.&lt;/p>
&lt;/blockquote>
&lt;h2 id="sentry-node-configuration">Sentry Node Configuration&lt;/h2>
&lt;div class="table-responsive">
&lt;table class="table-striped table-hover">
&lt;thead class="table-dark">
&lt;tr>
&lt;th>Config Option&lt;/th>
&lt;th>Setting&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>seed_mode&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pex&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>persistent_peers&lt;/td>
&lt;td>validator node, optionally other sentry nodes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>private_peer_ids&lt;/td>
&lt;td>validator node ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unconditional_peer_ids&lt;/td>
&lt;td>validator node ID, optionally other sentry node IDs&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>addr_book_strict&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>external_address&lt;/td>
&lt;td>set this to &amp;ldquo;x.x.x.x:26656&amp;rdquo;, where x.x.x.x is the sentry&amp;rsquo;s node public IP-Address&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div>
&lt;blockquote>
&lt;p>The sentry nodes should be able to talk to the entire network hence why &lt;strong>&lt;code>pex=true&lt;/code>&lt;/strong>.
The &lt;strong>&lt;code>persistent_peers&lt;/code>&lt;/strong> of a sentry node will be the validator, and optionally other sentry nodes.
The sentry nodes should make sure they do not gossip the validator&amp;rsquo;s ip,
&amp;rsquo; to do this you must put the validator nodeID as a &lt;strong>&lt;code>private_peer_ids&lt;/code>&lt;/strong>. The &lt;strong>&lt;code>unconditional peer IDs&lt;/code>&lt;/strong> will be the validator node ID and optionally other sentry node IDs. Since the sentry nodea must be able to connect to other p2p peers, &lt;strong>&lt;code>addr_book_strict&lt;/code>&lt;/strong> must be set to &lt;strong>&lt;code>true&lt;/code>&lt;/strong>, otherwise no inbound connections are made. The &lt;strong>&lt;code>external_address&lt;/code>&lt;/strong> needs to be set to your sentry&amp;rsquo;s node public IP-address of the form &lt;strong>&lt;code>&amp;ldquo;x.x.x.x:26656&amp;rdquo;&lt;/code>&lt;/strong>. This is the connection address and port that will be gossipped to other nodes for connecting back to your sentry.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>IMPORTANT&lt;/strong> Do not forget to secure your node&amp;rsquo;s firewalls when setting them up.&lt;/p>
&lt;h2 id="about-gossipping">About Gossipping&lt;/h2>
&lt;p>Nodes will gossip their known peers that are not marked as a private node to other nodes on the p2p network.&lt;br>
will be gossipped.&lt;/p>
&lt;p>If you plan to install sentry nodes, the recommendation is to setup the sentry first, then after that install the validator node and directly
connect it to the relay. If your validator node was already installed, it&amp;rsquo;s already gossipped to other peers. And you want to prevent that.
You can fix this by blocking the p2p ports to non-relays with a firewall, and the peers will eventually remove your validator.
But ideally, the installation of a validator should be done with relay setup in mind to make it a complete private installation. This requires some handshaking.&lt;/p></description></item><item><title>Docs: Used Ports</title><link>/docs/configuration/ports/ports/</link><pubDate>Wed, 08 Feb 2023 00:00:00 +0000</pubDate><guid>/docs/configuration/ports/ports/</guid><description>
&lt;p>By default the follow ports are used by &lt;strong>aya&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>26656&lt;/strong>
&lt;ul>
&lt;li>pnp networking port to connect to the consensus network&lt;/li>
&lt;li>On a validator this port needs to be exposed to sentry nodes&lt;/li>
&lt;li>On a sentry node this port needs to be exposed to the open internet&lt;/li>
&lt;li>This is the port validators and sentries use to communicate to each other&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;ul>
&lt;li>&lt;strong>26657&lt;/strong>
&lt;ul>
&lt;li>Consensus RPC port.&lt;/li>
&lt;li>Some tools, example querying tools, use this port to query blockchain status.&lt;/li>
&lt;li>You should not directly expose this port.&lt;/li>
&lt;li>This should be shielded from the open internet.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>26658&lt;/strong>
&lt;ul>
&lt;li>Out of process ABCI app&lt;/li>
&lt;li>This should be shielded from the open internet&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>29090&lt;/strong>
&lt;ul>
&lt;li>the gRPC server port. This is used for gRPC server communication with&lt;/li>
&lt;li>Cosmos SDK application layer. With this you can query banking, staking and - delegation information from Cosmos SDK.&lt;/li>
&lt;li>Example, some monitoring services might use this communication mechanism since its much faster than RESTful.&lt;/li>
&lt;li>This should be shielded from the open internet&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Some optional ports that might be used by &lt;strong>aya&lt;/strong> are as follows&lt;/p>
&lt;ul>
&lt;li>&lt;strong>26600&lt;/strong>
&lt;ul>
&lt;li>&lt;a href="https://github.com/tendermint/tendermint/blob/master/docs/nodes/metrics.md">Prometheus&lt;/a> stats server&lt;/li>
&lt;li>System stats about the ayad process&lt;/li>
&lt;li>Needs to be enabled in the config file&lt;/li>
&lt;li>This should be shielded from the open internet, unless you want monitor your validator consensus metrics&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>1317&lt;/strong>
&lt;ul>
&lt;li>The REST server&lt;/li>
&lt;li>for automated management of anything you can do with the CLI&lt;/li>
&lt;li>This should be shielded from the open internet.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>More &lt;a href="https://docs.cosmos.network/main/core/grpc_rest">here&lt;/a> on endpoints&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;strong>Note&lt;/strong>: Monitoring tools that are installed use additional port, ex Grafana uses port 3000&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;strong>IMPORTANT&lt;/strong>:
For ports 1317 and 26657, you way want to use them as a RESTful endpoint by proxy-ing them to an external interface via an http proxy like Nginx or Coddy. The idea is to treat them like a web service for RESTful requests to the RPC ports done over https. You may configure rate limiting on the http proxy or make request with user authentication using a web app. This way you are not exposing the ports directly and your node is protected from receiving too many request suddenly.&lt;/p>
&lt;/blockquote></description></item><item><title>Docs: Update Website and Logo</title><link>/docs/configuration/websiteandlogo/</link><pubDate>Tue, 04 Apr 2023 00:00:00 +0000</pubDate><guid>/docs/configuration/websiteandlogo/</guid><description>
&lt;p>&lt;strong>Written by Community Contributer &lt;a href="https://twitter.com/PoolShamrock">Cardano SHAMROCK&lt;/a>&lt;/strong>&lt;/p>
&lt;h1 id="update-website-and-description">Update Website And Description&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>On your Validator Node run&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ayad tx staking edit-validator --website &lt;span style="color:#1bc5e0">&amp;#34;https://www.example.com&amp;#34;&lt;/span> --details &lt;span style="color:#1bc5e0">&amp;#34;ENO Description&amp;#34;&lt;/span> --from ACCOUNT --home /opt/aya&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;blockquote>
&lt;p>Note: Ensure to replace &lt;strong>ACCOUNT&lt;/strong> with your own ENO&amp;rsquo;s Account name, replace &lt;strong>&lt;a href="https://www.example.com">https://www.example.com&lt;/a>&lt;/strong> with your own site address, replace &lt;strong>ENO Description&lt;/strong> with your own preferred details.&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ol>
&lt;h1 id="update-logo">Update Logo&lt;/h1>
&lt;ol>
&lt;li>
&lt;p>Create Account on Keybase: &lt;a href="https://keybase.io">https://keybase.io&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Add logo to Keybase&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Copy Key from Keybase dashboard&lt;/p>
&lt;/li>
&lt;li>
&lt;p>On your Validator Node run&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>ayad tx staking edit-validator --identity&lt;span style="color:#ffb8d1">=&lt;/span>KEYBASEKEY --from ACCOUNT --home /opt/aya&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;blockquote>
&lt;p>Note: Ensure to replace &lt;strong>ACCOUNT&lt;/strong> with your own ENO&amp;rsquo;s Account name, replace &lt;strong>KEYBASEKEY&lt;/strong> with the key you obtained while signing up for Keybase&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ol></description></item><item><title>Docs: Firewall Settings</title><link>/docs/configuration/firewall/</link><pubDate>Wed, 08 Feb 2023 00:00:00 +0000</pubDate><guid>/docs/configuration/firewall/</guid><description>
&lt;p>These instructions assume a Validator-Sentry architecture.&lt;/p>
&lt;h2 id="sentry-node">Sentry Node&lt;/h2>
&lt;p>Apply these firewall settings on your sentry node&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>sudo ufw &lt;span style="color:#ff79c6">default&lt;/span> deny incoming
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw &lt;span style="color:#ff79c6">default&lt;/span> allow outgoing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw allow proto tcp from &amp;lt;IP&amp;gt; to any port &lt;span style="color:#bd93f9">22&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw allow from any to any port &lt;span style="color:#bd93f9">26656&lt;/span> proto tcp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>Since the sentry node has &lt;strong>pex&lt;/strong> enabled, connections from any machine to the p2p port (26656) needs to be allowed,
so that other nodes can talk to the sentry for p2p communication of consensus messages.&lt;/p>
&lt;p>The firewall settings above only allows ssh login from the given machine with IP-address &lt;strong>IP&lt;/strong>,
which should be the client machine you want to login from. This is good practice and limits the attack vector on your server.&lt;/p>
&lt;blockquote>
&lt;p>Note that with a proper VPN solution, such as tailscale, this specific firewall rule can be entirely omitted,
giving you the highest level of security.&lt;/p>
&lt;/blockquote>
&lt;p>When done&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>sudo ufw enable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl restart ssh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw status&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 id="validator-node">Validator Node&lt;/h2>
&lt;p>Apply these firewall settings on your validator node&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>sudo ufw &lt;span style="color:#ff79c6">default&lt;/span> deny incoming
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw &lt;span style="color:#ff79c6">default&lt;/span> allow outgoing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw allow proto tcp from &amp;lt;IP&amp;gt; to any port &lt;span style="color:#bd93f9">22&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>The validator firewall will be configured to make &lt;strong>only outgoing p2p connections&lt;/strong> to the sentry nodes.
Only allowing outgoing p2p connections to the sentry nodes further limits the attack vector on your validator node,
since we don&amp;rsquo;t have to open the p2p port. See the manual setup guide on how to configure the sentry/validator correctly for this.&lt;/p>
&lt;p>The firewall settings above only allows ssh login from the given machine with the give IP-address &lt;strong>IP&lt;/strong>,
which should be the client machine you want to login from.This is good practice and limits the attack vector on your server.&lt;/p>
&lt;blockquote>
&lt;p>Note that with a proper VPN solution, such as tailscale, this specific firewall rule can be entirely omitted, giving you the highest level of security.&lt;/p>
&lt;/blockquote>
&lt;p>If you have &lt;code>prometheus=true&lt;/code> metrics logging enabled in the &lt;strong>config.toml&lt;/strong>, you should allow the prometheus listen port as well.&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>sudo ufw allow proto tcp from &amp;lt;IP&amp;gt; to any port &lt;span style="color:#bd93f9">26600&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>where &lt;strong>IP&lt;/strong> is the address of your prometheus server.&lt;/p>
&lt;p>When done&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>sudo ufw enable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl restart ssh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw status&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 id="grafana">Grafana&lt;/h2>
&lt;p>Additional services can be opened such as grafana as follows. I don&amp;rsquo;t recommend to run your grafana server on the same machine as your validator.
This should be discouraged. Grafana typically uses port 3000.&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>sudo ufw allow proto tcp from &amp;lt;IP&amp;gt; to any port &lt;span style="color:#bd93f9">3000&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>When done&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span>sudo ufw enable
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl restart ssh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo ufw status&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;h2 id="prometheus">Prometheus&lt;/h2>
&lt;p>If you want to use Prometheus metrics, you should consult with the metrics exporter tool which port it uses for exporting
metrics. Prometheus specific setup recommendations and installation instructions will be released shortly,
when the nodebase releases its nodebase monitoring service.&lt;/p></description></item></channel></rss>