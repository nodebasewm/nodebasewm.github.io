<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><link rel=canonical type=text/html href=/docs/tutorials/publictestnet/sentrynodemanual/><link rel=alternate type=application/rss+xml href=/docs/tutorials/publictestnet/sentrynodemanual/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>1. Sentry Node Manual Installation | NodeBaseDevs</title><meta name=description content="Full Installation Guide for installing a sentry node 
"><meta property="og:title" content="1. Sentry Node Manual Installation"><meta property="og:description" content="Full Installation Guide for installing a sentry node 
"><meta property="og:type" content="website"><meta property="og:url" content="/docs/tutorials/publictestnet/sentrynodemanual/"><meta property="og:site_name" content="NodeBaseDevs"><meta itemprop=name content="1. Sentry Node Manual Installation"><meta itemprop=description content="Full Installation Guide for installing a sentry node 
"><meta name=twitter:card content="summary"><meta name=twitter:title content="1. Sentry Node Manual Installation"><meta name=twitter:description content="Full Installation Guide for installing a sentry node 
"><link rel=preload href=/scss/main.min.6a57e8f3f347dea5d31cb48e3b4ea9fdae32d499473089bdef9b45457b5debb8.css as=style><link href=/scss/main.min.6a57e8f3f347dea5d31cb48e3b4ea9fdae32d499473089bdef9b45457b5debb8.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-00000000-0")}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>NodeBaseDevs</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><div class=td-search><div class=td-search__icon></div><input type=search class="td-search__input form-control td-search-input" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/tutorials/publictestnet/sentrynodemanual/>Return to the regular view of this page</a>.</p></div><h1 class=title>1. Sentry Node Manual Installation</h1><div class=lead>Full Installation Guide for installing a sentry node</div><ul></ul><div class=content><p><strong>Written by Nodebase Team member <a href=https://twitter.com/intertreeJK>intertree (Johnny Kelly)</a></strong></p><h1 id=introduction>Introduction</h1><p>The following guide will take you through all manual steps to be taken to have a fully running Sentry Node ready to be attached to your later installed Validator.</p><p>This guide assumes you have already followed steps to set up a new user named wmt to run the Sentry Node software, and that you have taken proper steps to secure this username from being logged into from external machines.</p><blockquote><p><strong>Note: DO NOT follow this guide while logged in as the root user on your machine. This is bad practice. Make a sudo group user named wmt FIRST, and configure secure login to it using SSH keys.</strong></p></blockquote><p>Now, with that warning out of the way, we shall proceed with the guide!</p><h1 id=step-by-step-installation-guide>Step-By-Step Installation Guide</h1><ol><li><p>Logged in as user wmt we first start by making the base directory structure for World Mobile&rsquo;s ayad and Cosmovisor binaries that are to be installed on our Node.</p><p>We do this by entering the following group of commands</p><blockquote><p>Note: There is <strong>no need</strong> to replace <code>"${USER}:${USER}"</code> below with your own username, as <code>${USER}</code> is a <strong>system variable</strong> that will <strong>always be</strong> the currently logged on user. Which, in this case, <strong>should be</strong> user <code>wmt</code>.</p></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo mkdir -p /opt/aya
</span></span><span style=display:flex><span>sudo chown <span style=color:#1bc5e0>&#34;</span><span style=color:#1bc5e0>${</span>USER<span style=color:#1bc5e0>}</span><span style=color:#1bc5e0>:</span><span style=color:#1bc5e0>${</span>USER<span style=color:#1bc5e0>}</span><span style=color:#1bc5e0>&#34;</span> /opt/aya
</span></span><span style=display:flex><span>mkdir -p /opt/aya/cosmovisor/genesis/bin
</span></span><span style=display:flex><span>mkdir -p /opt/aya/backup
</span></span><span style=display:flex><span>mkdir -p /opt/aya/logs
</span></span><span style=display:flex><span>mkdir -p /opt/aya/config</span></span></code></pre></td></tr></table></div></div></li><li><p>Next we set up our Node&rsquo;s Aya Network Chain ID <em>(depending on which Chain ID this Node will be running on)</em></p><p>We do this by entering the <strong>one of</strong> the following commands</p><blockquote><p>Note: For the moment there is only <strong>one</strong> Chain ID for World Mobile Aya Chain Networks available publicly, but this will be changing soon and, as a result, there will be more than the single Chain ID option below to choose from. For now though, the single Chain ID option available is listed below.</p></blockquote><p><em>For Aya Network Public Testnet:</em></p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>CHAIN_ID<span style=color:#ffb8d1>=</span><span style=color:#1bc5e0>&#34;aya_preview_501&#34;</span></span></span></code></pre></td></tr></table></div></div></li><li><p>Now we set up our Node&rsquo;s Moniker (a friendly name for our Node to help identify it)</p><p>We do this by entering the following command<br><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>moniker<span style=color:#ffb8d1>=</span><span style=color:#1bc5e0>&#39;node&#39;</span></span></span></code></pre></td></tr></table></div></div></p><blockquote><p>Note: <code>'node'</code> is an <strong>optional</strong> default Moniker we can use to create some <em>&lsquo;security by obscurity&rsquo;</em> on the Aya Blockchain Network, by <strong>NOT</strong> having our <strong>publicly listed</strong> Sentry Node be named <strong>in any way</strong> that can be linked back to the name of our ENO. If a custom public Moniker is preferred, however, We can replace <code>'node'</code> with our own chosen name at this point, keeping the<code> ''</code>s in place.</p></blockquote></li><li><p>Now we install a required prerequisite package (jq) for the successful completion of installation steps.</p><p>We do this by entering the following command<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt-get -q install jq -y</span></span></code></pre></td></tr></table></div></div></p></li><li><p>Now we create an installation directory for the EarthNode installation files, navigate to it, download the installer zip file, install the unzip command (if not already installed to our OS), and extract the earthnode_installer archive.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir ~/earthnode_installer
</span></span><span style=display:flex><span>cd ~/earthnode_installer
</span></span><span style=display:flex><span>wget https://github.com/max-hontar/aya-preview-binaries/releases/download/v0.4.1/aya_preview_501_installer_2023_09_04.zip
</span></span><span style=display:flex><span>sudo apt-get -q install unzip -y
</span></span><span style=display:flex><span>unzip aya_preview_501_installer_2023_09_04.zip
</span></span><span style=display:flex><span>rm aya_preview_501_installer_2023_09_04.zip</span></span></code></pre></td></tr></table></div></div></p></li><li><p>Now we confirm that the included binaries for ayad and cosmovisor match their release_checksums values as provided by World Mobile. Check that the output of both commands match one another.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sha256sum ayad cosmovisor
</span></span><span style=display:flex><span>cat release_checksums </span></span></code></pre></td></tr></table></div></div></p></li><li><p>Following this confirmation step, we copy the ayad and cosmovisor binary files to their home locations for use in future operations.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp ~/earthnode_installer/ayad /opt/aya/cosmovisor/genesis/bin/ayad
</span></span><span style=display:flex><span>cp ~/earthnode_installer/cosmovisor /opt/aya/cosmovisor/cosmovisor</span></span></code></pre></td></tr></table></div></div></p></li><li><p>Now we initialise ayad to create all of the required configuration and set up files needed for running the cosmovisor and ayad binaries.</p><p>We do this by entering the following command<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./ayad init <span style=color:#1bc5e0>&#34;</span><span style=color:#1bc5e0>${</span>moniker<span style=color:#1bc5e0>}</span><span style=color:#1bc5e0>&#34;</span> --chain-id $CHAIN_ID --home /opt/aya</span></span></code></pre></td></tr></table></div></div></p><p>We have now populated the /opt/aya directory and its subdirectories with the necessary files to configure our Node.</p></li><li><p>Next we copy across the genesis.json file used to kickstart the aya_preview_501 Blockchain Connection.</p><p>We do this by entering the following command<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp ~/earthnode_installer/genesis.json /opt/aya/config/genesis.json</span></span></code></pre></td></tr></table></div></div></p></li><li><p>Before running our Sentry Node for the first time there are some initial configuration changes that need to be made to allow for smooth operation and connection the to aya_preview_501 Blockchain, and to ensure that connections between our own ENO Infrastructure&rsquo;s Nodes remain robust.</p><p>So now we navigate to the aya config folder and open the config.toml file for our Sentry Node to make these changes.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /opt/aya/config
</span></span><span style=display:flex><span>nano config.toml </span></span></code></pre></td></tr></table></div></div></p><p>We are now in the nano text editor, looking at the config.toml file contents for our Sentry Node.</p><blockquote><p>Note: It is possible to search for the fields we need to edit more quickly by copying them from the below steps, pressing ctrl+w inside of nano in our terminal window, right clicking on the window, pasting the names of the values we need to edit, and pressing enter to jump to them.</p><p>We can also remove text blocks from a document that we wish to replace with new text blocks by holding down shift, selecting the existing rows we wish to remove, and then pressing ctrl+k to remove them.</p><p>We can then select and copy the replacement text from the steps shown in this guide below, and right click and paste the new settings into the terminal window.</p><p>We can undo any mistakes we&rsquo;ve made while working inside nano by pressing alt+u</p></blockquote><p>We now make the necessary changes to this file as follows</p><ul><li><p>Change the <strong>statesync</strong> option to be <strong>enable = true</strong> instead of <strong>false</strong><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5>#######################################################</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5>###         State Sync Configuration Options        ###</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5>#######################################################</span>
</span></span><span style=display:flex><span><span style=color:#ffb8d1>[</span>statesync<span style=color:#ffb8d1>]</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># State sync rapidly bootstraps a new node by discovering, fetching, and restoring a state machine</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># snapshot from peers instead of fetching and replaying historical blocks. Requires some peers in</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># the network to take and serve state machine snapshots. State sync is not attempted if the node</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># has any local state (LastBlockHeight &gt; 0). The node will have a truncated block history,</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># starting from the height of the snapshot.</span>
</span></span><span style=display:flex><span>enable <span style=color:#ffb8d1>=</span> true </span></span></code></pre></td></tr></table></div></div></p></li><li><p>Change the <strong>addr_book_strict</strong> option to be <strong>addr_book_strict = false</strong> instead of <strong>true</strong><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># Set true for strict address routability rules</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># Set false for private or local networks</span>
</span></span><span style=display:flex><span>addr_book_strict <span style=color:#ffb8d1>=</span> false</span></span></code></pre></td></tr></table></div></div></p></li><li><p>Set the <strong>log_level</strong> to <strong>&ldquo;error&rdquo;</strong> instead of <strong>&ldquo;info&rdquo;</strong><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>log_level <span style=color:#ffb8d1>=</span> <span style=color:#1bc5e0>&#34;error&#34;</span></span></span></code></pre></td></tr></table></div></div></p></li><li><p>Set the public nodes supplied by World Mobile, that provide a statesync of historical Blockchain Data to our new Sentry Node, as persistent_peers<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># Comma separated list of nodes to keep persistent connections to</span>
</span></span><span style=display:flex><span>persistent_peers <span style=color:#ffb8d1>=</span> <span style=color:#1bc5e0>&#34;692f6bb765ed3170db4fb5f5dfd27c54503d52d3@peer1-501.worldmobilelabs.com:26656,d1da4b1ad17ea35cf8c1713959b430a95743afcd@peer2-501.worldmobilelabs.com:26656&#34;</span></span></span></code></pre></td></tr></table></div></div></p></li><li><p>Set the public seed node supplied by World Mobile, that helps keep your Sentry Node&rsquo;s P2P address book file up to date, as a seed in <strong>seeds</strong><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># Comma separated list of seed nodes to connect to</span>
</span></span><span style=display:flex><span>seeds <span style=color:#ffb8d1>=</span> <span style=color:#1bc5e0>&#34;7836955a4d42ed85a6adb13ae4f96806ab2fd9b2@peer3-501.worldmobilelabs.com:26656&#34;</span>    </span></span></code></pre></td></tr></table></div></div></p></li><li><p>Set the <strong>external_address = &ldquo;&rdquo;</strong> field to have our own Node&rsquo;s Public IP address followed by our Node&rsquo;s local connection Port (default 26656), so that it can broadcast this information to other nodes over P2P (replace x.x.x.x with our Node&rsquo;s Public IP).<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># Address to advertise to peers for them to dial</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># If empty, will use the same port as the laddr,</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># and will introspect on the listener or use UPnP</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># to figure out the address. ip and port are required</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># example: 159.89.10.97:26656</span>
</span></span><span style=display:flex><span>external_address <span style=color:#ffb8d1>=</span> <span style=color:#1bc5e0>&#34;x.x.x.x:26656&#34;</span></span></span></code></pre></td></tr></table></div></div></p></li></ul><p>At this point the initial editing work to our <strong>config.toml</strong> file is done, and it can now be saved with these changes.</p><p>To save the <strong>config.toml</strong> file within nano editor we press <strong>ctrl+x</strong> and then <strong>press y</strong>, followed by <strong>enter</strong>. This will save the file with the same filename as before.</p><p>Next we need to make some initial changes to the <strong>app.toml</strong> file contents for our Sentry Node.</p><p>Luckily, the app.toml file we need to edit is in the same directory as config.toml.</p><p>So we do this by entering the following command</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano app.toml</span></span></code></pre></td></tr></table></div></div><p>We now make the necessary changes to this file as follows</p><ul><li>Replace GRPC port to not overlap with standard Prometheus port, replacing 9090 with 29090<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># Address defines the gRPC server address to bind to.</span>
</span></span><span style=display:flex><span>address <span style=color:#ffb8d1>=</span> <span style=color:#1bc5e0>&#34;localhost:29090&#34;</span></span></span></code></pre></td></tr></table></div></div></li><li>make sure the gas price units for our network to be 0uswmt<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># The minimum gas prices a validator is willing to accept for processing a</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># transaction. A transaction&#39;s fees must meet the minimum of any denomination</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># specified in this config (e.g. 0.25token1;0.0001token2).</span>
</span></span><span style=display:flex><span>minimum-gas-prices <span style=color:#ffb8d1>=</span> <span style=color:#1bc5e0>&#34;0uswmt&#34;</span></span></span></code></pre></td></tr></table></div></div></li><li>Change the API Configuration section <strong>enable</strong> option to be <strong>enable = true</strong> instead of <strong>false</strong><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ffb8d1>[</span>api<span style=color:#ffb8d1>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># Enable defines if the API server should be enabled.</span>
</span></span><span style=display:flex><span>enable <span style=color:#ffb8d1>=</span> true</span></span></code></pre></td></tr></table></div></div></li></ul><p>At this point the initial editing work to our <strong>app.toml</strong> file is done, and it can now be saved with these changes.</p><p>To save the app.toml file within nano editor we press <strong>ctrl+x</strong> and then <strong>press y</strong>, followed by <strong>enter</strong>. This will save the file with the same filename as before.</p></li><li><p>Now we need to export some environment variables to get our system ready to run our Sentry Node for the first time.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export DAEMON_NAME<span style=color:#ffb8d1>=</span>ayad
</span></span><span style=display:flex><span>export DAEMON_HOME<span style=color:#ffb8d1>=</span>/opt/aya
</span></span><span style=display:flex><span>export DAEMON_DATA_BACKUP_DIR<span style=color:#ffb8d1>=</span>/opt/aya/backup
</span></span><span style=display:flex><span>export DAEMON_RESTART_AFTER_UPGRADE<span style=color:#ffb8d1>=</span>true
</span></span><span style=display:flex><span>export DAEMON_ALLOW_DOWNLOAD_BINARIES<span style=color:#ffb8d1>=</span>true
</span></span><span style=display:flex><span>ulimit -Sn <span style=color:#c5a3ff>4096</span></span></span></code></pre></td></tr></table></div></div></p></li><li><p>Before proceeding to start up our Sentry Node for the first time we will need to install some live monitoring software to see what it is doing once active.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/
</span></span><span style=display:flex><span>mkdir nodebase-tools 
</span></span><span style=display:flex><span>cd nodebase-tools
</span></span><span style=display:flex><span>wget -O ayaview.zip https://github.com/nodebasewm/download/blob/main/ayaview.zip?raw<span style=color:#ffb8d1>=</span>true
</span></span><span style=display:flex><span>unzip ayaview.zip
</span></span><span style=display:flex><span>rm ayaview.zip</span></span></code></pre></td></tr></table></div></div></p></li><li><p>We will also quickly add a new Firewall Rule to our Server to allow Incoming connections to come into our Node once it has started.</p><p>What command we need to enter to do this will depend on how our Server is set up to handle Firewall Rules.</p><p>If our Server is using <strong>ufw</strong> to handle Firewall Rules (most likely for most installs) we need to enter the following command to accept Incoming connections over Port 26656 (a Sentry Node&rsquo;s default Port)</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ufw allow from any to any port <span style=color:#c5a3ff>26656</span> proto tcp</span></span></code></pre></td></tr></table></div></div><p>If our Server is using iptables to handle Firewall Rules we need to enter the following group of commands to accept Incoming connections over Port 26656 (a Sentry Node&rsquo;s default Port)</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo iptables -I INPUT -p tcp -m tcp --dport <span style=color:#c5a3ff>26656</span> -j ACCEPT
</span></span><span style=display:flex><span>sudo service iptables save</span></span></code></pre></td></tr></table></div></div><p>If we haven&rsquo;t yet set up our Firewall Rules at all, we can follow the steps laid out over at <a href=/docs/configuration/firewall/>Firewall Settings</a> to do this.</p></li><li><p>With the Firewall Rule added we are now going to start up our Sentry Node for the first time, manually.</p><blockquote><p>Note: Later we will be setting up a service file to have our Node automatically restart on Server reboot, or following a crash. For now though we will proceed manually.</p></blockquote><p>We do this by entering the following group of commands</p><blockquote><p>Note: There is a lot of automated scripting shown below that has to be run before first boot of Node to ensure that it will start to sync the chain. It will not be needed again for future start ups.</p></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>INTERVAL<span style=color:#ffb8d1>=</span><span style=color:#c5a3ff>15000</span>
</span></span><span style=display:flex><span>LATEST_HEIGHT<span style=color:#ffb8d1>=</span><span style=color:#c2ffdf>$(</span>curl -s <span style=color:#1bc5e0>&#34;http://peer1-501.worldmobilelabs.com:26657/block&#34;</span> | jq -r .result.block.header.height<span style=color:#c2ffdf>)</span>
</span></span><span style=display:flex><span>BLOCK_HEIGHT<span style=color:#ffb8d1>=</span><span style=color:#c2ffdf>$((</span><span style=color:#ffb8d1>(</span><span style=color:#c2ffdf>$((</span>LATEST_HEIGHT <span style=color:#ffb8d1>/</span> INTERVAL<span style=color:#c2ffdf>))</span> <span style=color:#ffb8d1>-</span> <span style=color:#c5a3ff>1</span><span style=color:#ffb8d1>)</span> <span style=color:#ffb8d1>*</span> INTERVAL <span style=color:#ffb8d1>+</span> <span style=color:#c2ffdf>$((</span>INTERVAL <span style=color:#ffb8d1>/</span> <span style=color:#c5a3ff>2</span><span style=color:#c2ffdf>))))</span>
</span></span><span style=display:flex><span>TRUST_HASH<span style=color:#ffb8d1>=</span><span style=color:#c2ffdf>$(</span>curl -s <span style=color:#1bc5e0>&#34;http://peer1-501.worldmobilelabs.com:26657/block?height=</span><span style=color:#1bc5e0>${</span>BLOCK_HEIGHT<span style=color:#1bc5e0>}</span><span style=color:#1bc5e0>&#34;</span> | jq -r .result.block_id.hash<span style=color:#c2ffdf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># Set available RPC servers (at least two) required for light client snapshot verification</span>
</span></span><span style=display:flex><span>sed -i -E <span style=color:#1bc5e0>&#34;s|^(rpc_servers[[:space:]]+=[[:space:]]+).*</span>$<span style=color:#1bc5e0>|\1\&#34;http://peer1-501.worldmobilelabs.com:26657,http://peer2-501.worldmobilelabs.com:26657\&#34;|&#34;</span> /opt/aya/config/config.toml
</span></span><span style=display:flex><span><span style=color:#b0bec5># Set &#34;safe&#34; trusted block height</span>
</span></span><span style=display:flex><span>sed -i -E <span style=color:#1bc5e0>&#34;s|^(trust_height[[:space:]]+=[[:space:]]+).*</span>$<span style=color:#1bc5e0>|\1</span>$BLOCK_HEIGHT<span style=color:#1bc5e0>|&#34;</span> /opt/aya/config/config.toml
</span></span><span style=display:flex><span><span style=color:#b0bec5># Set &#34;qsafe&#34; trusted block hash</span>
</span></span><span style=display:flex><span>sed -i -E <span style=color:#1bc5e0>&#34;s|^(trust_hash[[:space:]]+=[[:space:]]+).*</span>$<span style=color:#1bc5e0>|\1\&#34;</span>$TRUST_HASH<span style=color:#1bc5e0>\&#34;|&#34;</span> /opt/aya/config/config.toml
</span></span><span style=display:flex><span><span style=color:#b0bec5># Set trust period, should be ~2/3 unbonding time (3 weeks for preview network)</span>
</span></span><span style=display:flex><span>sed -i -E <span style=color:#1bc5e0>&#34;s|^(trust_period[[:space:]]+=[[:space:]]+).*</span>$<span style=color:#1bc5e0>|\1\&#34;302h0m0s\&#34;|&#34;</span> /opt/aya/config/config.toml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cd ~/earthnode_installer
</span></span><span style=display:flex><span>/opt/aya/cosmovisor/cosmovisor run start --home /opt/aya &amp;&gt;&gt;/opt/aya/logs/cosmovisor.log &amp;</span></span></code></pre></td></tr></table></div></div><p>We have now started our Node software for the first time!</p></li><li><p>Now we shall proceed to monitoring it.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/nodebase-tools 
</span></span><span style=display:flex><span>./ayaview</span></span></code></pre></td></tr></table></div></div></p><p>The ayaview software will start up and visually show us the Blockchain data being downloaded to bring us up to date with the current tip of the chain.</p><p>We will know it has caught up to the current state of the Chain once the Block Height column stops counting up so quickly, and starts adding just 1 new Block Height to left hand table only around every 5-6 seconds.</p><p>Once we are up to date with the current tip of the Chain we need to do some tidy up work on both the config.toml and app.toml files that we edited before the first run of our Node.</p><p>We can do this by first pressing q on the ayaview console to quit out of it and then by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd /opt/aya/config/
</span></span><span style=display:flex><span>nano config.toml</span></span></code></pre></td></tr></table></div></div></p><p>We are now back in the nano text editor, looking at the config.toml file contents for our Sentry Node.</p><p>We now make the necessary changes to this file as follows</p><ul><li>change the <strong>statesync</strong> option to be <strong>enable = false</strong> instead of <strong>true</strong></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5>#######################################################</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5>###         State Sync Configuration Options        ###</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5>#######################################################</span>
</span></span><span style=display:flex><span><span style=color:#ffb8d1>[</span>statesync<span style=color:#ffb8d1>]</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># State sync rapidly bootstraps a new node by discovering, fetching, and restoring a state machine</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># snapshot from peers instead of fetching and replaying historical blocks. Requires some peers in</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># the network to take and serve state machine snapshots. State sync is not attempted if the node</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># has any local state (LastBlockHeight &gt; 0). The node will have a truncated block history,</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># starting from the height of the snapshot.</span>
</span></span><span style=display:flex><span>enable <span style=color:#ffb8d1>=</span> false</span></span></code></pre></td></tr></table></div></div><p>At this point the tidy up editing work to our config.toml file is done, and it can now be saved with these changes.</p><p>To save the config.toml file within nano editor we press ctrl+x and then press y, followed by enter. This will save the file with the same filename as before.</p></li><li><p>Next we need to make a change to the app.toml file contents for our Sentry Node.</p><p>We do this by entering the following command<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>nano app.toml</span></span></code></pre></td></tr></table></div></div></p><p>And we edit the following section of the file to the below setting, changing it from being 0 to being 100.</p><blockquote><p>Note: Setting the snapshot-interval to 100 will ensure that we can use our Sentry Node to kickstart our Validator later on. Which will allow us to set up our Validator without ever exposing its external IP to the rest of the Network.</p></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># snapshot-interval specifies the block interval at which local state sync snapshots are</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># taken (0 to disable).</span>
</span></span><span style=display:flex><span>snapshot-interval <span style=color:#ffb8d1>=</span> <span style=color:#c5a3ff>100</span></span></span></code></pre></td></tr></table></div></div><p>At this point the tidy up editing work to our app.toml file is done, and it can now be saved with these changes.</p><p>To save the app.toml file within nano editor we press ctrl+x and then press y, followed by enter. This will save the file with the same filename as before.</p><blockquote><p>Note: These <strong>config.toml</strong> and <strong>app.toml</strong> file edits above should only be completed once we are SURE that our Node is up to date with the current state of the Chain. We DO NOT make this edit before our Node has fully synced to the current Block Height ayaview, and is adding a new Block around every 5-6 seconds.</p></blockquote></li><li><p>At present, our Node should be running along nicely in the background and keeping up to date with the current state of the Chain, but we still have to complete some more steps before we have fully completed our Sentry Node&rsquo;s initial set up.</p><p>First we need to ensure that we have saved all of our Node&rsquo;s important data, needed for future reference both by tools and by us.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/earthnode_installer
</span></span><span style=display:flex><span><span style=color:#b0bec5># Get the address of the validator</span>
</span></span><span style=display:flex><span>validator_address<span style=color:#ffb8d1>=</span><span style=color:#c2ffdf>$(</span>./ayad tendermint show-address --home /opt/aya<span style=color:#c2ffdf>)</span>
</span></span><span style=display:flex><span><span style=color:#b0bec5># Use &#39;jq&#39; to create a JSON object with the &#39;moniker&#39;, &#39;operator_address&#39; and &#39;validator_address&#39; fields</span>
</span></span><span style=display:flex><span>jq --arg key0 <span style=color:#1bc5e0>&#39;moniker&#39;</span> <span style=color:#1bc5e0>\
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0></span>--arg value0 <span style=color:#1bc5e0>&#34;</span>$moniker<span style=color:#1bc5e0>&#34;</span> <span style=color:#1bc5e0>\
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0></span>--arg key1 <span style=color:#1bc5e0>&#39;validator_address&#39;</span> <span style=color:#1bc5e0>\
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0></span>--arg value1 <span style=color:#1bc5e0>&#34;</span>$validator_address<span style=color:#1bc5e0>&#34;</span> <span style=color:#1bc5e0>\
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0></span><span style=color:#1bc5e0>&#39;. | .[$key0]=$value0 | .[$key1]=$value1&#39;</span>  <span style=color:#1bc5e0>\
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0></span><span style=color:#ffb8d1>&lt;&lt;&lt;</span><span style=color:#1bc5e0>&#39;{}&#39;</span> | tee /opt/aya/sentry.json</span></span></code></pre></td></tr></table></div></div></p><p>This will save our Sentry Node&rsquo;s data to the filename sentry.json in the <strong>/opt/aya</strong> directory.</p></li><li><p>Next we want to set up some symbolic links for the &lsquo;ayad&rsquo; and &lsquo;cosmovisor&rsquo; binaries so that their specific commands can be called from anywhere on our Node&rsquo;s filesystem.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ln -s /opt/aya/cosmovisor/current/bin/ayad /usr/local/bin/ayad &gt;/dev/null 2&gt;&amp;<span style=color:#c5a3ff>1</span>
</span></span><span style=display:flex><span>sudo ln -s /opt/aya/cosmovisor/cosmovisor /usr/local/bin/cosmovisor &gt;/dev/null 2&gt;&amp;<span style=color:#c5a3ff>1</span></span></span></code></pre></td></tr></table></div></div></p></li><li><p>And finally, we want to create a systemd service file that will allow our Node to automatically start on a reboot of our Server and to automatically attempt to restart itself on any crashes.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo tee /etc/systemd/system/cosmovisor.service &gt; /dev/null <span style=color:#1bc5e0>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Start the &#39;cosmovisor&#39; daemon
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Create a Systemd service file for the &#39;cosmovisor&#39; daemon
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>[Unit]
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>Description=Aya Node
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>After=network-online.target
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>[Service]
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>User=$USER
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Start the &#39;cosmovisor&#39; daemon with the &#39;run start&#39; command and write output to journalctl
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>ExecStart=$(which cosmovisor) run start --home /opt/aya
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Restart the service if it fails
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>Restart=always
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Restart the service after 3 seconds if it fails
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>RestartSec=3
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Set the maximum number of file descriptors
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>LimitNOFILE=4096
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Set environment variables for data backups, automatic downloading of binaries, and automatic restarts after upgrades
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>Environment=&#34;DAEMON_NAME=ayad&#34;
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>Environment=&#34;DAEMON_HOME=/opt/aya&#34;
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>Environment=&#34;DAEMON_DATA_BACKUP_DIR=/opt/aya/backup&#34;
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>Environment=&#34;DAEMON_ALLOW_DOWNLOAD_BINARIES=true&#34;
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>Environment=&#34;DAEMON_RESTART_AFTER_UPGRADE=true&#34;
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>[Install]
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0># Start the service on system boot
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>WantedBy=multi-user.target
</span></span></span><span style=display:flex><span><span style=color:#1bc5e0>EOF</span></span></span></code></pre></td></tr></table></div></div></p><p>This will have added a new service file to our Server under the path /etc/systemd/system named cosmovisor.service. This service file is what will be called when the Server reboots, or if our Node crashes.</p></li><li><p>With the service now created, we now need to enable it for future use.</p><p>We do this by entering the following group of commands</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#b0bec5># Reload the Systemd daemon</span>
</span></span><span style=display:flex><span>sudo systemctl daemon-reload
</span></span><span style=display:flex><span><span style=color:#b0bec5># Enable the &#39;cosmovisor&#39; service to start on system boot</span>
</span></span><span style=display:flex><span>sudo systemctl enable cosmovisor</span></span></code></pre></td></tr></table></div></div><p>We can now confirm that our service is ready to be started by entering the following command.</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl status cosmovisor.service</span></span></code></pre></td></tr></table></div></div><p>This should show us the following</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>○ cosmovisor.service - Aya Node
</span></span><span style=display:flex><span>    Loaded: loaded <span style=color:#ffb8d1>(</span>/etc/systemd/system/cosmovisor.service; enabled; vendor preset: enabled<span style=color:#ffb8d1>)</span>
</span></span><span style=display:flex><span>    Active: inactive <span style=color:#ffb8d1>(</span>dead<span style=color:#ffb8d1>)</span></span></span></code></pre></td></tr></table></div></div><p>If we see this, we know we have successfully installed our Aya Node Service.</p></li><li><p>All that remains now, is to close down our first run of our Node and to restart it using this newly installed Service instead of manually launching our Node as before.</p><p>To do this, we need to identify what the current process number of our still running first run Node is.</p><p>We do this by entering the following command</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ps -ef | grep cosmovisor</span></span></code></pre></td></tr></table></div></div><p>The output of this command should something like this</p><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wmt   <span style=color:#c5a3ff>33619</span>   <span style=color:#c5a3ff>33486</span>  <span style=color:#c5a3ff>0</span> 03:11 pts/0    00:00:02 /opt/aya/cosmovisor/cosmovisor run start --home /opt/aya
</span></span><span style=display:flex><span>wmt   <span style=color:#c5a3ff>33625</span>   <span style=color:#c5a3ff>33619</span> <span style=color:#c5a3ff>33</span> 03:11 pts/0    00:16:16 /opt/aya/cosmovisor/genesis/bin/ayad start --home /opt/aya
</span></span><span style=display:flex><span>wmt   <span style=color:#c5a3ff>34703</span>   <span style=color:#c5a3ff>33486</span>  <span style=color:#c5a3ff>0</span> 03:59 pts/0    00:00:00 grep --color<span style=color:#ffb8d1>=</span>auto cosmovisor</span></span></code></pre></td></tr></table></div></div><p>What we are looking for is the leftmost number appearing for the line that contains &ldquo;/opt/aya/cosmovisor/cosmovisor run start &ndash;home /opt/aya&rdquo; on its right hand side</p><p>In the above example, this number is 33619.</p><p>Our number will be different, and we need to take a note of it for the next step.</p><p>Once we have this number we can now use it to turn off our first run Node that has served us so well to get our Blockchain sync up to date with the current tip of the Chain.</p><p>We do this by entering the following command</p><blockquote><p>Note: We replace <code>&lt;number></code> with our noted number from above at this point, removing the surrounding &lt;></p></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo kill &lt;number&gt;</span></span></code></pre></td></tr></table></div></div><p>We have now killed our running Node, but don&rsquo;t worry, we are going to bring it right back to life. Except this time, as a Service!</p><p>To do this we enter the following command<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl start cosmovisor.service</span></span></code></pre></td></tr></table></div></div></p><p>Now we need to check that cosmovisor.service has started properly.</p><p>We do this by entering the following command<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo systemctl status cosmovisor.service</span></span></code></pre></td></tr></table></div></div></p><p>When we ran this command previously it said our Aya Node Service was inactive (dead), this time it should say something like the following<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cosmovisor.service - Aya Node
</span></span><span style=display:flex><span>    Loaded: loaded <span style=color:#ffb8d1>(</span>/etc/systemd/system/cosmovisor.service; enabled; vendor preset: enabled<span style=color:#ffb8d1>)</span>
</span></span><span style=display:flex><span>    Active: active <span style=color:#ffb8d1>(</span>running<span style=color:#ffb8d1>)</span> since Wed 2023-03-01 04:06:05 UTC; 4s ago
</span></span><span style=display:flex><span>Main PID: <span style=color:#c5a3ff>34791</span> <span style=color:#ffb8d1>(</span>cosmovisor<span style=color:#ffb8d1>)</span>
</span></span><span style=display:flex><span>    Tasks: <span style=color:#c5a3ff>15</span> <span style=color:#ffb8d1>(</span>limit: 4573<span style=color:#ffb8d1>)</span>
</span></span><span style=display:flex><span>    Memory: 382.3M
</span></span><span style=display:flex><span>        CPU: 5.063s
</span></span><span style=display:flex><span>    CGroup: /system.slice/cosmovisor.service
</span></span><span style=display:flex><span>            ├─34791 /usr/local/bin/cosmovisor run start --home /opt/aya
</span></span><span style=display:flex><span>            └─34796 /opt/aya/cosmovisor/genesis/bin/ayad start --home /opt/aya
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Mar <span style=color:#c5a3ff>01</span> 04:06:05 localhost systemd<span style=color:#ffb8d1>[</span>1<span style=color:#ffb8d1>]</span>: Started Aya Node.
</span></span><span style=display:flex><span>Mar <span style=color:#c5a3ff>01</span> 04:06:05 localhost cosmovisor<span style=color:#ffb8d1>[</span>34791<span style=color:#ffb8d1>]</span>: 4:06AM INF running app args<span style=color:#ffb8d1>=[</span><span style=color:#1bc5e0>&#34;start&#34;</span>,<span style=color:#1bc5e0>&#34;--home&#34;</span>,<span style=color:#1bc5e0>&#34;/opt/aya&#34;</span><span style=color:#ffb8d1>]</span> module<span style=color:#ffb8d1>=</span>cosmovisor path<span style=color:#ffb8d1>=</span>/opt/aya/cosmovisor/genesis/bin/ayad</span></span></code></pre></td></tr></table></div></div></p><p>Some details will be different to the above example, but this should be the general layout. The important point is that it should say &lsquo;active (running)&rsquo; in green.</p></li><li><p>We can now confirm everything is continuing to sync from the Blockchain by going back to our ayaview console and watching to see if the Block Height is still slowly ticking upwards as before.</p><p>We do this by entering the following group of commands<div class=highlight><div style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#433e56;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/nodebase-tools
</span></span><span style=display:flex><span>./ayaview</span></span></code></pre></td></tr></table></div></div></p><p>If everything is working as it should our ayaview console should now be showing us the Aya Blockchain ticking on by once more, around every 5-6 seconds.</p></li></ol><p><strong>And that&rsquo;s it!!!</strong></p><p><strong>Congratulations! We have now successfully completed setting up a Sentry Node!</strong></p><blockquote><p>Note: At the moment though, our Sentry Node does not yet have a Validator that it connects to for protecting it, and passing on its Block Votes.</p><p>Which means it hasn&rsquo;t yet got to fulfil its true purpose in life just yet (much like many of us).</p><p>So, to fix this, we will tackle connecting our newly set up Sentry Node to our EarthNode Validator, as well as any other running Sentry Nodes in our Infrastructure, in a separate guide.</p><p>For now though, we can simply bask in the glory of setting up a well running Sentry Node!</p></blockquote></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Email aria-label=Email><a class=text-white target=_blank rel=noopener href=mailto:EarthNodeChile@gmail.com aria-label=Email><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/EarthNodeChile/ aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://example.org/stack%20%28not%20enabled%29 aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/nodebaswm/docs aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2024 The Nodebase Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small><p class=mt-2><a href=/about/>About NodeBaseDevs</a></p></div></div></div></footer></div><script src=/js/main.min.be25a680a0d95dc8b5d6664622e2134aa894220e2f224ef609e00f633a3a1b32.js integrity="sha256-viWmgKDZXci11mZGIuITSqiUIg4vIk72CeAPYzo6GzI=" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script></body></html>